(function(a){a.fn.splitter=function(b){b=b||{};return this.each(function(){var n;function i(s){if(c.outline){n=n||m.clone(false).insertAfter(g)}o.css("-webkit-user-select","none");m.addClass(c.activeClass);g._posSplit=g[0][c.pxSplit]-s[c.eventPos];a(document).bind("mousemove",k).bind("mouseup",q)}function k(s){var t=g._posSplit+s[c.eventPos];if(c.outline){t=Math.max(0,Math.min(t,d._DA-m._DA));m.css(c.origin,t)}else{l(t)}}function q(s){m.removeClass(c.activeClass);var t=g._posSplit+s[c.eventPos];if(c.outline){n.remove();n=null;l(t)}o.css("-webkit-user-select","text");a(document).unbind("mousemove",k).unbind("mouseup",q)}function l(s){s=Math.max(g._min,d._DA-f._max,Math.min(s,g._max,d._DA-m._DA-f._min));m._DA=m[0][c.pxSplit];m.css(c.origin,s).css(c.fixed,d._DF);g.css(c.origin,0).css(c.split,s).css(c.fixed,d._DF);f.css(c.origin,s+m._DA).css(c.split,d._DA-m._DA-s).css(c.fixed,d._DF);if(!a.browser.msie){o.trigger("resize")}}function p(v,u){var t=0;for(var s=1;s<arguments.length;s++){t+=Math.max(parseInt(v.css(arguments[s]))||0,0)}return t}var j=(b.splitHorizontal?"h":b.splitVertical?"v":b.type)||"v";var c=a.extend({activeClass:"active",pxPerKey:8,tabIndex:0,accessKey:""},{v:{keyLeft:39,keyRight:37,cursor:"e-resize",splitbarClass:"vsplitbar",outlineClass:"voutline",type:"v",eventPos:"pageX",origin:"left",split:"width",pxSplit:"offsetWidth",side1:"Left",side2:"Right",fixed:"height",pxFixed:"offsetHeight",side3:"Top",side4:"Bottom"},h:{keyTop:40,keyBottom:38,cursor:"n-resize",splitbarClass:"hsplitbar",outlineClass:"houtline",type:"h",eventPos:"pageY",origin:"top",split:"height",pxSplit:"offsetHeight",side1:"Top",side2:"Bottom",fixed:"width",pxFixed:"offsetWidth",side3:"Left",side4:"Right"}}[j],b);var d=a(this).css({position:"relative"});var o=a(">*",d[0]).css({position:"absolute","z-index":"1","-moz-outline-style":"none"});var g=a(o[0]);var f=a(o[1]);var e=a('<a href="javascript:void(0)"></a>').attr({accessKey:c.accessKey,tabIndex:c.tabIndex,title:c.splitbarClass}).bind(a.browser.opera?"click":"focus",function(){this.focus();m.addClass(c.activeClass)}).bind("keydown",function(u){var t=u.which||u.keyCode;var s=t==c["key"+c.side1]?1:t==c["key"+c.side2]?-1:0;if(s){l(g[0][c.pxSplit]+s*c.pxPerKey,false)}}).bind("blur",function(){m.removeClass(c.activeClass)});var m=a(o[2]||"<div></div>").insertAfter(g).css("z-index","100").append(e).attr({"class":c.splitbarClass,unselectable:"on"}).css({position:"absolute","user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none"}).bind("mousedown",i);if(/^(auto|default|)$/.test(m.css("cursor"))){m.css("cursor",c.cursor)}m._DA=m[0][c.pxSplit];d._PBF=a.boxModel?p(d,"border"+c.side3+"Width","border"+c.side4+"Width"):0;d._PBA=a.boxModel?p(d,"border"+c.side1+"Width","border"+c.side2+"Width"):0;g._pane=c.side1;f._pane=c.side2;a.each([g,f],function(){this._min=c["min"+this._pane]||p(this,"min-"+c.split);this._max=c["max"+this._pane]||p(this,"max-"+c.split)||9999;this._init=c["size"+this._pane]===true?parseInt(a.curCSS(this[0],c.split)):c["size"+this._pane]});var r=g._init;if(!isNaN(f._init)){r=d[0][c.pxSplit]-d._PBA-f._init-m._DA}if(c.cookie){if(!a.cookie){alert("jQuery.splitter(): jQuery cookie plugin required")}var h=parseInt(a.cookie(c.cookie));if(!isNaN(h)){r=h}a(window).bind("unload",function(){var s=String(m.css(c.origin));a.cookie(c.cookie,s,{expires:c.cookieExpires||365,path:c.cookiePath||document.location.pathname})})}if(isNaN(r)){r=Math.round((d[0][c.pxSplit]-d._PBA-m._DA)/2)}if(c.anchorToWindow){d._hadjust=p(d,"borderTopWidth","borderBottomWidth","marginBottom");d._hmin=Math.max(p(d,"minHeight"),20);a(window).bind("resize",function(){var t=d.offset().top;var s=a(window).height();d.css("height",Math.max(s-t-d._hadjust,d._hmin)+"px");if(!a.browser.msie){d.trigger("resize")}}).trigger("resize")}else{if(c.resizeToWidth&&!a.browser.msie){a(window).bind("resize",function(){d.trigger("resize")})}}d.bind("resize",function(t,s){if(t.target!=this){return}d._DF=d[0][c.pxFixed]-d._PBF;d._DA=d[0][c.pxSplit]-d._PBA;if(d._DF<=0||d._DA<=0){return}l(!isNaN(s)?s:(!(c.sizeRight||c.sizeBottom)?g[0][c.pxSplit]:d._DA-f[0][c.pxSplit]-m._DA))}).trigger("resize",[r])})}})(jQuery);var gDavSvn=(function(){var k={ret:false};var g=404;var l="DAV:";var b="svn:";var p="DAV:";var o="http://subversion.tigris.org/xmlns/dav/";var n=function(A){var B=A.match(/^https?:\/\/[^\/?#]+/);if(!B){return null}return{raw_url:A,base_url:B[0]}};var z=function(A){var C=new RegExp("^([0-9]+)-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2}\\.[0-9]+)((Z)|(\\+|-)([0-9]{2}):([0-9]{2}))$");var E=C.exec(A);if(!E){return null}var B=parseInt(E[6],10);var G=Math.round((parseFloat(E[6])-B)*1000);var D=Date.UTC(parseInt(E[1],10),parseInt(E[2],10)-1,parseInt(E[3],10),parseInt(E[4],10),parseInt(E[5],10),B,G);if(!E[8]){var F=parseInt(E[10],10)*3600*1000+parseInt(E[11],10)*60*1000;if(E[9]=="+"){D-=F}else{D+=F}}return new Date(D)};var r=function(D,B,A){var C=D.getElementsByTagNameNS(B,A);if(!C){return null}var F=C[0];if(!F){return null}var E=F.firstChild;if(!E){return null}return E.nodeValue};var c=function(G,B,F,A,E){var B=B.replace(/\/$/,"");var D=new XMLHttpRequest();D.open(G,B,true);for(var C in F){D.setRequestHeader(C,F[C])}D.onreadystatechange=function(){E(D)};D.send(A)};var m=function(B,D,A,C){c("OPTIONS",B,D,A,function(E){if(E.readyState==4){C(E)}})};var w=function(B,D,A,C){c("PROPFIND",B,D,A,function(E){if(E.readyState==4){C(E)}})};var q=function(B,D,A,C){c("REPORT",B,D,A,function(E){if(E.readyState==4){C(E)}})};var h=function(B,C){var A='<?xml version="1.0" encoding="utf-8"?><D:options xmlns:D="DAV:"><D:activity-collection-set/></D:options>';m(B,{},A,function(D){var F={};try{F.youngest_revision=D.getResponseHeader("SVN-Youngest-Rev")}catch(E){C(null);return}C(F)})};var f=function(B,C){var A='<?xml version="1.0" encoding="utf-8"?><propfind xmlns="DAV:"><prop><version-controlled-configuration xmlns="DAV:"/><resourcetype xmlns="DAV:"/><baseline-relative-path xmlns="http://subversion.tigris.org/xmlns/dav/"/><repository-uuid xmlns="http://subversion.tigris.org/xmlns/dav/"/></prop></propfind>';w(B,{Depth:0},A,function(D){var I={};try{if(D.status==g){C({ret:false,status:g});return}var H=D.responseXML;if(!(I.vcc_path=H.getElementsByTagNameNS(l,"version-controlled-configuration")[0].getElementsByTagNameNS(l,"href")[0].firstChild.nodeValue)){C(null);return}var E=H.getElementsByTagNameNS(o,"baseline-relative-path")[0];if(!E){C(null);return}var G=(E.firstChild?E.firstChild.nodeValue:"");I.path=G.split("/").map(function(J){return encodeURIComponent(J).replace(/%../g,function(K){return K.toLowerCase()})}).join("/")}catch(F){C(null);return}C({ret:true,vcc:I})})};var d=function(A,B){f(A,function(C){if(!C){B(null);return}if(!C.ret){switch(C.status){case g:var D=A.substr(0,A.lastIndexOf("/"));var E=A.substr(A.lastIndexOf("/")+1);d(D,function(F){if(!F){B(null);return}F.vcc.path+="/"+E;B(F);return});return;default:B(null);return}}B(C)})};var e=function(C,B){var A='<?xml version="1.0" encoding="utf-8"?><propfind xmlns="DAV:"><prop><checked-in xmlns="DAV:"/></prop></propfind>';w(C,{Depth:0},A,function(D){var G={};try{var F=D.responseXML;if(!(G.bln=F.getElementsByTagNameNS(p,"checked-in")[0].getElementsByTagNameNS(l,"href")[0].firstChild.nodeValue)){B(null);return}}catch(E){B(null);return}B(G)})};var y=function(C,B,E){var A='<?xml version="1.0" encoding="utf-8"?><propfind xmlns="DAV:"><prop><baseline-collection xmlns="DAV:"/><version-name xmlns="DAV:"/></prop></propfind>';var D={Depth:0};if(B!==null){D.Label=B}w(C,D,A,function(F){var I={};try{var H=F.responseXML;if(!(I.bc=H.getElementsByTagNameNS(p,"baseline-collection")[0].getElementsByTagNameNS(l,"href")[0].firstChild.nodeValue)){E(null);return}if(!(I.revision=parseInt(H.getElementsByTagNameNS(p,"version-name")[0].firstChild.nodeValue))){E(null);return}}catch(G){E(null);return}E(I)})};var v=function(D,C,B,E){var A='<?xml version="1.0" encoding="utf-8"?><S:get-locations xmlns:S="svn:" xmlns:D="DAV:"><S:path></S:path><S:peg-revision>'+C+"</S:peg-revision><S:location-revision>"+B+"</S:location-revision></S:get-locations>";q(D,{},A,function(H){var G=null;try{var J=H.responseXML;var F=J.getElementsByTagNameNS(b,"location")[0];if(!(F.hasAttribute("rev"))||!(F.hasAttribute("path"))){E(null);return}G={revision:parseInt(F.getAttribute("rev")),path:F.getAttribute("path").replace(/^\//,"")}}catch(I){E(null);return}E(G)})};var i=function(D,C,F,B,E){var A='<?xml version="1.0" encoding="utf-8"?><S:log-report xmlns:S="svn:"><S:start-revision>'+C+"</S:start-revision><S:end-revision>"+F+"</S:end-revision><S:limit>"+B+"</S:limit><S:discover-changed-paths /><S:revprop>svn:author</S:revprop><S:revprop>svn:date</S:revprop><S:revprop>svn:log</S:revprop><S:path></S:path></S:log-report>";q(D,{},A,function(L){var G=[];try{var M=L.responseXML;var P=M.getElementsByTagNameNS(b,"log-item");for(var I=0;I<P.length;I++){var H=P[I];var J=r(H,l,"version-name");var O={revision:((J||J!==null)?parseInt(J):null),comment:r(H,l,"comment"),author:r(H,l,"creator-displayname"),date:z(r(H,b,"date"))};var N=[];N=N.concat(Array.prototype.map.call(H.getElementsByTagNameNS(b,"modified-path"),function(Q){return{type:"M",path:Q.firstChild.nodeValue}}));N=N.concat(Array.prototype.map.call(H.getElementsByTagNameNS(b,"added-path"),function(Q){var R={type:"A",path:Q.firstChild.nodeValue};if(Q.hasAttribute("copyfrom-path")){R.copyfrom_path=Q.getAttribute("copyfrom-path")}if(Q.hasAttribute("copyfrom-rev")){R.copyfrom_rev=Q.getAttribute("copyfrom-rev")}return R}));N=N.concat(Array.prototype.map.call(H.getElementsByTagNameNS(b,"deleted-path"),function(Q){return{type:"D",path:Q.firstChild.nodeValue}}));N=N.concat(Array.prototype.map.call(H.getElementsByTagNameNS(b,"replaced-path"),function(Q){var R={type:"R",path:Q.firstChild.nodeValue};if(Q.hasAttribute("copyfrom-path")){R.copyfrom_path=Q.getAttribute("copyfrom-path")}if(Q.hasAttribute("copyfrom-rev")){R.copyfrom_rev=Q.getAttribute("copyfrom-rev")}return R}));N.sort(function(R,Q){if(R.path>Q.path){return 1}else{if(R.path<Q.path){return -1}else{if(R.type>Q.type){return 1}else{if(R.type<Q.type){return -1}else{return 0}}}}});O.paths=N;G.push(O)}}catch(K){E(null);return}E(G)})};var x=function(B,C){var A='<?xml version="1.0" encoding="utf-8"?><propfind xmlns="DAV:"><prop><creator-displayname xmlns="DAV:"/><creationdate xmlns="DAV:"/><version-name xmlns="DAV:"/><getcontentlength xmlns="DAV:"/><resourcetype xmlns="DAV:"/></prop></propfind>';w(B,{Depth:1},A,function(J){var H=[];try{var L=J.responseXML;var I=L.getElementsByTagNameNS(l,"response");for(var E=0;E<I.length;E++){var M=I[E];var D=M.getElementsByTagNameNS(l,"href")[0].firstChild.nodeValue;var K=(M.getElementsByTagNameNS(p,"resourcetype")[0].getElementsByTagNameNS(l,"collection").length==1)?"directory":"file";var F=r(M,p,"version-name");var N=r(M,p,"getcontentlength");H.push({href:D,type:K,author:r(M,p,"creator-displayname"),date:z(r(M,p,"creationdate")),revision:((F||F!==null)?parseInt(F):null),size:((N||N!==null)?parseInt(N):null)})}}catch(G){C(null);return}C(H)})};var j=function(A,B){h(A,function(C){if(!C){B(null);return}d(A,function(D){if(!D){B(null);return}B({obj_options:C,vcc:D.vcc})})})};var a=function(A,D){var C=n(A);if(!C){D(k);return}var B=C.base_url;j(A,function(E){if(!E){D(k);return}var F=B+E.vcc.vcc_path;e(F,function(G){if(!G){D(k);return}var H=B+G.bln;y(H,null,function(I){if(!I){D(k);return}D({ret:true,revision:I.revision})})})})};var u=function(D,B,C,H,A,G){var F=n(D);if(!F){G(k);return}var E=F.base_url;B=((B==="HEAD")?null:B);C=((C==="HEAD")?null:C);if(C===null||B===null){a(D,function(I){if(!I||!(I.ret)){G(k);return}B=((B===null)?I.revision:B);C=((C===null)?I.revision:C);u(D,B,C,H,A,G)});return}H=(H||0);j(D,function(I){if(!I){G(k);return}var J=E+I.vcc.vcc_path;y(J,B,function(L){if(!L){G(k);return}var K=E+L.bc+I.vcc.path;if(B!=C){v(K,B,C,function(N){if(!N){G(k);return}var M=D.substr(0,D.length-I.vcc.path.length)+N.path;u(M,C,C,H,A,G)});return}i(K,C,H,A,function(M){if(!M){G(k);return}G({ret:true,logs:M})})})})};var t=function(A,B){j(A,function(E){if(!E){B(k);return}var D=E.vcc.path;var C={ret:true,path:D};if(D===""){C.root_url=A.replace(/\/$/,"")+"/"}else{C.root_url=A.substr(0,A.length-D.length)}B(C)})};var s=function(B,A,E){var D=n(B);if(!D){E(k);return}var C=D.base_url;if(A=="HEAD"||A===null){a(B,function(F){if(!F||!(F.ret)){E(k);return}s(B,F.revision,E)});return}j(B,function(F){if(!F){E(k);return}var G=C+F.vcc.vcc_path;y(G,A,function(I){if(!I){E(k);return}var H=C+I.bc+F.vcc.path;x(H,function(J){if(!J){E(k);return}var K={ret:true,file_list:J.map(function(L){return{path:L.href.substr(I.bc.length).replace(/\/$/,""),href:(C+L.href),type:L.type,revision:L.revision,author:L.author,date:L.date,size:L.size}}),revision:A};E(K)})})})};return{log:u,rootUrl:t,fileList:s,latestRevision:a}})();var DavSvnResource=function(a,b,c){this.m_type=b;switch(b){case DavSvnResource.TYPE_DIRECTORY:this.m_dir_state=DavSvnResource.DIR_CLOSED;break;default:break}this.m_state=DavSvnResource.STATE_NOT_LOADED;this.m_name=a.replace(/%../g,function(d){return d.toLowerCase()});this.m_children={};this.m_parent=null;this.m_info=(c||{})};DavSvnResource.prototype={type:function(){return this.m_type},name:function(a){if(a){return decodeURIComponent(this.m_name)}else{return this.m_name}},state:function(){return this.m_state},setState:function(a){this.m_state=a},dirIsOpened:function(){if(this.m_type!=DavSvnResource.TYPE_DIRECTORY){throw"dirIsOpened error"}return this.m_dir_state==DavSvnResource.DIR_OPENED},dirIsClosed:function(){if(this.m_type!=DavSvnResource.TYPE_DIRECTORY){throw"dirIsClosed error"}return this.m_dir_state==DavSvnResource.DIR_CLOSED},setDirState:function(a){if(this.m_type!=DavSvnResource.TYPE_DIRECTORY){throw"setDirState error"}var b=(this.m_dir_state!=a);this.m_dir_state=a;return b},dirOpen:function(){return this.setDirState(DavSvnResource.DIR_OPENED)},dirClose:function(){return this.setDirState(DavSvnResource.DIR_CLOSED)},isRoot:function(){return(this.name()===""&&this.isDirectory())},isDirectory:function(){return this.type()==DavSvnResource.TYPE_DIRECTORY},isFile:function(){return this.type()==DavSvnResource.TYPE_FILE},isUnknown:function(){return this.type()==DavSvnResource.TYPE_UNKNOWN},addChild:function(b){var a=b.name();this.m_children[a]=b;b.setParent(this)},children:function(){var b=[];for(var a in this.m_children){b.push(a)}b.sort();return b.map(function(c){return this.m_children[c]},this)},childDirs:function(){return this.children().filter(function(a){return a.isDirectory()})},childFiles:function(){return this.children().filter(function(a){return a.isFile()})},hasChild:function(a){return this.m_children[a]!=null},findChild:function(a){return this.m_children[a]},parent:function(){return this.m_parent},setParent:function(a){this.m_parent=a},path:function(c){var b=this.name(c);var a=this.parent();while(a&&!(a.isRoot())){b=a.name(c)+"/"+b;a=a.parent()}return b},contentUrl:function(){return this.m_info.content_url},markNotLoaded:function(){this.m_children={};this.m_state=DavSvnResource.STATE_NOT_LOADED},markLoading:function(){this.m_children={};this.m_state=DavSvnResource.STATE_LOADING},markLoaded:function(){this.m_state=DavSvnResource.STATE_LOADED},isLoaded:function(){return this.m_state==DavSvnResource.STATE_LOADED},isLoading:function(){return this.m_state==DavSvnResource.STATE_LOADING},info:function(a){if(a){return this.m_info[a]}else{return this.m_info}},debugInfo:function(f){f=(f||0);var d="";for(var b=0;b<f;b++){d+="    "}var e=d+this.name()+": "+(this.type()==DavSvnResource.TYPE_FILE?"file":"dir");var c=[];for(var a in this.m_children){c.push(a)}c.sort();e+="\n"+c.map(function(g){return this.m_children[g].debugInfo(f+1)},this).join("\n");return e}};DavSvnResource.TYPE_UNKNOWN=1;DavSvnResource.TYPE_FILE=2;DavSvnResource.TYPE_DIRECTORY=3;DavSvnResource.DIR_OPENED=1;DavSvnResource.DIR_CLOSED=2;DavSvnResource.STATE_LOADING=1;DavSvnResource.STATE_LOADED=2;DavSvnResource.STATE_NOT_LOADED=3;var DavSvnModel=function(c,b,d){c=c.replace(/\/$/,"").replace(/%../g,function(e){return e.toLowerCase()});this.m_peg_revision=(b||"HEAD");this.m_operation_revision=(b||"HEAD");this.m_root_url=null;this.m_current_path=null;this.m_listeners=[];this.m_root_dir=null;this.m_pjax_state=null;if(d){this.m_pjax_state=new DavSvnPjaxState(this)}var a=this;gDavSvn.rootUrl(c,function(e){if(!(e.ret)){return}a.m_root_url=e.root_url;a.m_uuid=e.uuid;a.m_current_path=e.path;a.reloadPath(e.path)})};DavSvnModel.prototype={addListener:function(a){this.m_listeners.push(a)},removeListener:function(a){this.m_listeners=this.m_listeners.filter(function(b){return b!=a})},notify:function(){this.m_listeners.forEach(function(a){a.update()})},pegRevision:function(){return this.m_peg_revision},operationRevision:function(){return this.m_operation_revision},repositoryInfo:function(){return{uuid:this.m_uuid,root_url:this.m_root_url}},createDavSvnResource:function(a){var b={author:a.author,revision:a.revision,date:a.date,size:a.size,content_url:a.href};return new DavSvnResource(a.path.split("/").pop(),(a.type=="file"?DavSvnResource.TYPE_FILE:DavSvnResource.TYPE_DIRECTORY),b)},reloadPath:function(c){var a=this;var b=this.resource(c);if(!b){if(c===""){b=new DavSvnResource("",DavSvnResource.TYPE_DIRECTORY);b.dirOpen()}else{b=new DavSvnResource(c.split("/").pop(),DavSvnResource.TYPE_UNKNOWN)}this.setResource(c,b)}b.markLoading();this.notify();gDavSvn.fileList(this.m_root_url+c,this.m_peg_revision,function(e){if(!(e.ret)){b.markNotLoaded();a.notify();return}var d=a.createDavSvnResource(e.file_list.shift());e.file_list.forEach(function(f){var g=a.createDavSvnResource(f);d.addChild(g)});d.markLoaded();a.setResource(c,d);if(b.isDirectory()&&d.isDirectory()){if(b.dirIsOpened()){d.dirOpen()}else{d.dirClose()}}else{if(b.isUnknown()&&d.isDirectory()){d.dirOpen()}}a.notify()})},pushState:function(){if(this.m_pjax_state){this.m_pjax_state.pushState({path:this.path(),revision:this.pegRevision()})}},changePath:function(b,a){if(this.m_current_path!=b){this.m_current_path=b;if(!a){this.pushState()}this.notify()}},path:function(){return this.m_current_path},currentPath:function(){return this.path()},openDirectory:function(c,a){var b=this.resource(c);if(!b||!b.isDirectory()){return}var d=b.dirOpen();if(d&&!a){this.notify()}},closeDirectory:function(c,a){var b=this.resource(c);if(!b||!b.isDirectory()){return}var d=b.dirClose();if(d&&!a){this.notify()}},toggleDirectory:function(c,a){var b=this.resource(c);if(!b||!b.isDirectory()){return}if(b.dirIsOpened()){this.closeDirectory(c,a)}else{this.openDirectory(c,a)}},clearAllResources:function(){if(!this.m_root_dir){return}this.m_root_dir=null},setResource:function(c,b){if(c===""){this.m_root_dir=b;return}this.m_root_dir=(this.m_root_dir||new DavSvnResource("",DavSvnResource.TYPE_DIRECTORY));var a=this.m_root_dir;var d=c.split("/");d.pop();d.forEach(function(e){if(a.hasChild(e)){a=a.findChild(e)}else{var f=new DavSvnResource(e,DavSvnResource.TYPE_DIRECTORY);a.addChild(f);a.dirOpen();a=f}});a.addChild(b);a.dirOpen()},resource:function(d){if(!this.m_root_dir){return null}if(d===""||!d){return this.m_root_dir}var e=d.split("/");var b=this.m_root_dir;for(var c=0;c<e.length;c++){var a=e[c];if(b.hasChild(a)){b=b.findChild(a)}else{return null}}return b},setRevision:function(a,b){if(this.m_peg_revision!=a||this.m_operation_revision!=a){this.m_peg_revision=a;this.m_operation_revision=a;if(!b){this.pushState()}this.clearAllResources();this.reloadPath(this.currentPath())}}};var DavSvnPjaxState=function(b){this.m_model=b;var a=this;window.addEventListener("popstate",function(e){var d=location.href;var f=DavSvnPjaxState.decodeUrl(a.m_model.repositoryInfo().root_url,d);var c=a.m_model.resource(f.path);a.m_model.changePath(f.path,true);if(!c||!c.isLoaded()){a.m_model.reloadPath(f.path)}a.m_model.setRevision(f.revision,true);var g=decodeURIComponent(f.path)+"@"+f.revision;DavSvnPjaxState.setPageTitle(g)})};DavSvnPjaxState.prototype={pushState:function(a){var b=decodeURIComponent(a.path)+"@"+a.revision;DavSvnPjaxState.setPageTitle(b);window.history.pushState(a,b,DavSvnPjaxState.encodeUrl(this.m_model.repositoryInfo().root_url,a.path,a.revision))}};DavSvnPjaxState.setPageTitle=function(d){try{var b=document.getElementsByTagName("head")[0];var a=b.getElementsByTagName("title")[0];while(a.firstChild){a.removeChild(a.firstChild)}a.appendChild(document.createTextNode(d))}catch(c){}};DavSvnPjaxState.encodeUrl=function(b,c,a){if(a=="HEAD"){return b+c+"?ajaxview"}else{return b+c+"?ajaxview&p="+a}};DavSvnPjaxState.decodeUrl=function(c,b){var d=DavSvnPjaxState.parseUrl(b);var a={path:d.url.substr(c.length).replace(/\/$/,""),revision:"HEAD"};if(d.params.p){if(d.params.p!="HEAD"){a.revision=parseInt(d.params.p)}}return a};DavSvnPjaxState.parseUrl=function(d){var b=d.indexOf("?");if(b<0){return{url:d,params:{}}}var a=d.substr(0,b);var c={};d.substr(b+1).split("&").forEach(function(f){var e=f.indexOf("=");if(e<0){c[f]=true}else{c[f.substr(0,e)]=f.substr(e+1)}});return{url:a,params:c}};var DavSvnLogModel=function(a,b){this.m_url=a.replace(/\/$/,"").replace(/%../g,function(c){return c.toLowerCase()});this.m_peg_revision=b;this.m_log_complete=false;this.m_state=DavSvnLogModel.STATE_LOADED;this.m_logs=[];this.m_listeners=[]};DavSvnLogModel.prototype={addListener:function(a){this.m_listeners.push(a)},removeListener:function(a){this.m_listeners=this.m_listeners.filter(function(b){return b!=a})},notify:function(){this.m_listeners.forEach(function(a){a.update()})},hasMoreLogs:function(){return !(this.m_log_complete)},logs:function(){return this.m_logs},eachLog:function(b,a){this.m_logs.forEach(b,a)},markLoading:function(){this.m_state=DavSvnLogModel.STATE_LOADING},markLoaded:function(){this.m_state=DavSvnLogModel.STATE_LOADED},isLoading:function(){return this.m_state==DavSvnLogModel.STATE_LOADING},isLoaded:function(){return this.m_state==DavSvnLogModel.STATE_LOADED},loadInitialLogs:function(b){if(this.isLoading()){return}var a=this;a.markLoading();a.m_log_complete=false;b=(b||DavSvnLogModel.INITIAL_LOG_COUNT);gDavSvn.log(this.m_url,this.m_peg_revision,this.m_peg_revision,0,b,function(c){if(!c.ret){a.markLoaded();a.m_logs=[];a.notify();return}a.markLoaded();a.m_logs=c.logs;a.m_log_complete=(c.logs.length<b);a.notify();return});this.notify()},loadMoreLogs:function(c){if(this.isLoading()||!this.hasMoreLogs()){return}c=(c||DavSvnLogModel.INITIAL_LOG_COUNT);if(this.m_logs.length==0){this.loadInitialLogs(c);return}var b=this.m_logs[this.m_logs.length-1].revision;var a=this;a.markLoading();gDavSvn.log(this.m_url,this.m_peg_revision,b,0,c+1,function(d){if(!d.ret){a.markLoaded();a.notify();return}a.markLoaded();if(d.logs.length<c+1){a.m_log_complete=true}d.logs.shift();a.m_logs=a.m_logs.concat(d.logs);a.notify()});this.notify()},reloadLogs:function(){if(this.m_logs.length==0){this.loadInitialLogs();return}var b=this.m_logs[0].revision;var c=this.m_logs.length;var a=this;a.markLoading();gDavSvn.log(this.m_url,this.m_peg_revision,b,c,function(d){if(!d.ret){a.markLoaded();a.notify();return}a.markLoaded();a.m_logs=d.logs;a.notify()});this.notify()},url:function(){return decodeURIComponent(this.m_url)}};DavSvnLogModel.INITIAL_LOG_COUNT=100;DavSvnLogModel.STATE_LOADED=1;DavSvnLogModel.STATE_LOADING=2;$(function(){var j={translator:function(p){var o="en";if(!p[o]){throw"Bug: translator."}var q=[];for(var n in p[o]){q.push(n)}for(var m in p){if(m==o){continue}for(var n in p[m]){if(q.indexOf(n)<0){throw"Bug: "+n+" is not included in "+o}}}return function(r,l){l=(l||navigator.language);var k=(p[l]||p[o]);return k[r]}},date:function(l,m){var k=function(o,q){var r=""+o;if(r.length<q){for(var p=0,n=q-r.length;p<n;p++){r="0"+r}}return r};switch(navigator.language){case"ja":switch(m){case j.DATE_DATE_ONLY:return k(l.getFullYear(),4)+"/"+k(l.getMonth()+1,2)+"/"+k(l.getDate(),2);case j.DATE_TIME_ONLY:return k(l.getHours(),2)+":"+k(l.getMinutes(),2)+":"+k(l.getSeconds(),2);case j.DATE_DATE_TIME:default:return k(l.getFullYear(),4)+"/"+k(l.getMonth()+1,2)+"/"+k(l.getDate(),2)+" "+k(l.getHours(),2)+":"+k(l.getMinutes(),2)+":"+k(l.getSeconds(),2)}break;case"en":default:switch(m){case j.DATE_DATE_ONLY:return k(l.getMonth()+1,2)+"/"+k(l.getDate(),2)+"/"+k(l.getFullYear(),4);case j.DATE_TIME_ONLY:return k(l.getHours(),2)+":"+k(l.getMinutes(),2)+":"+k(l.getSeconds(),2);case j.DATE_DATE_TIME:default:return k(l.getMonth()+1,2)+"/"+k(l.getDate(),2)+"/"+k(l.getFullYear(),4)+" "+k(l.getHours(),2)+":"+k(l.getMinutes(),2)+":"+k(l.getSeconds(),2)}break}},DATE_DATE_ONLY:1,DATE_TIME_ONLY:2,DATE_DATE_TIME:3};var h=function(m,k,l){this.m_view_elem=m;this.m_model=k;this.m_log_view=l;this.m_path=null};h.prototype={update:function(){var l=this.m_model.path();if(this.m_path!==l){var k=this.m_model.resource(l);if(!k){return}this.m_path=l;this.createElement(k)}},createElement:function(m){while(this.m_view_elem.firstChild){this.m_view_elem.removeChild(this.m_view_elem.firstChild)}var n=document.createElement("span");this.m_view_elem.appendChild(n);var o=[];while(!m.isRoot()){o.unshift({name:m.name(true),path:m.path()});m=m.parent()}var l=this.m_model.repositoryInfo().root_url;o.unshift({name:h.i18n("root"),path:m.path()});var k=this;o.forEach(function(r,p){if(p!=0){n.appendChild(document.createTextNode("/"))}var q=document.createElement("span");n.appendChild(q);q.appendChild(document.createTextNode(r.name));$(q).click(function(){var s=k.m_model.resource(r.path);if(s&&s.isLoaded()){k.m_model.changePath(r.path);if(k.m_log_view){k.m_log_view.change(l+r.path,k.m_model.pegRevision())}}else{k.m_model.changePath(r.path);k.m_model.reloadPath(r.path);if(k.m_log_view){k.m_log_view.change(l+r.path,k.m_model.pegRevision())}}})})}};h.i18n=j.translator({en:{root:"(root)"}});var e=function(m,k,l){this.m_view_elem=m;this.m_model=k;this.m_log_view=l;this.m_root_div=this.createRootDiv();this.m_view_elem.appendChild(this.m_root_div)};e.prototype={update:function(){this.updateTreeView()},updateTreeView:function(){var l=this.m_root_div;while(l.firstChild){l.removeChild(l.firstChild)}var k=this.m_model.resource("");this.createResourceNode(l,k)},createRootDiv:function(){var k=document.createElement("div");k.className=e.CLASS_ROOT_DIV;return k},appendDirectoryNodeTitle:function(q,k){var s=this;var r=k.path();var l="ui-state-default";switch(k.state()){case DavSvnResource.STATE_NOT_LOADED:l+=" not_loaded";break;case DavSvnResource.STATE_LOADING:l+=" loading";break;case DavSvnResource.STATE_LOADED:l+=" loaded";break}l+=" "+(k.dirIsOpened()?"dir_opened":"dir_closed");if(r==this.m_model.path()){l+=" ui-state-highlight"}$(q).addClass(l);var p=document.createElement("span");q.appendChild(p);var m=document.createElement("span");p.appendChild(m);l=e.CLASS_COLLAPSE_BUTTON+" ui-icon ui-icon-inline-block";if(k.dirIsOpened()){l+=" ui-icon-triangle-1-se"}else{l+=" ui-icon-triangle-1-e"}$(m).addClass(l);$(m).click(function(){var t=s.m_model.resource(r);if(t&&t.isLoaded()){s.m_model.toggleDirectory(r)}else{s.m_model.reloadPath(r);s.m_model.openDirectory(r)}});$(m).hover(function(){$(q).removeClass("ui-state-default").addClass("ui-state-hover")},function(){$(q).removeClass("ui-state-hover").addClass("ui-state-default")});var n=document.createElement("span");p.appendChild(n);l="ui-icon ui-icon-inline-block";if(k.isLoading()){l+=" ui-icon-loading"}else{if(k.dirIsOpened()){l+=" ui-icon-folder-open"}else{l+=" ui-icon-folder-collapsed"}}$(n).addClass(l);var o=document.createElement("a");p.appendChild(o);if(k.isRoot()){o.appendChild(document.createTextNode(e.i18n("root")))}else{o.appendChild(document.createTextNode(k.name(true)))}$(o).click(function(){var t=s.m_model.resource(r);if(t&&t.isLoaded()){s.m_model.changePath(r);if(s.m_log_view){s.m_log_view.change(s.m_model.repositoryInfo().root_url+r,s.m_model.pegRevision())}}else{s.m_model.changePath(r);s.m_model.reloadPath(r);if(s.m_log_view){s.m_log_view.change(s.m_model.repositoryInfo().root_url+r,s.m_model.pegRevision())}}});$(o).hover(function(){$(q).removeClass("ui-state-default").addClass("ui-state-hover")},function(){$(q).removeClass("ui-state-hover").addClass("ui-state-default")});$(o).dblclick(function(){s.m_model.reloadPath(r)});return p},createResourceNode:function(o,n){var p=document.createElement("dl");o.appendChild(p);var l=document.createElement("dt");l.className=e.CLASS_RESOURCE_TITLE;p.appendChild(l);this.appendDirectoryNodeTitle(l,n);if(n.isDirectory()&&n.dirIsOpened()){var m=document.createElement("dd");m.className=e.CLASS_CHILDREN_ROOT;p.appendChild(m);var k=document.createElement("ul");m.appendChild(k);n.childDirs().forEach(function(r){var q=document.createElement("li");k.appendChild(q);this.createResourceNode(q,r)},this)}}};e.i18n=j.translator({en:{root:"(root)"},ja:{root:"(root)"}});e.CLASS_ROOT_DIV="svn_root";e.CLASS_RESOURCE_TITLE="svn_resource_title";e.CLASS_COLLAPSE_BUTTON="dir_collapse";e.CLASS_CHILDREN_ROOT="svn_children_root";var c=function(l,n,s){var u=document.createElement("table");l.appendChild(u);u.className=c.CLASS_ROOT_TABLE;var v=this;var t=c.ROW_ATTRS;var o=function(y,w){var x=document.createElement("span");y.appendChild(x);x.appendChild(document.createTextNode(c.i18n(w)));$(x).click(function(){if(v.m_sort.attr==w){v.m_sort.reverse=!(v.m_sort.reverse)}else{v.m_sort.attr=w;v.m_sort.reverse=false}v.update()})};var r=[];var p=document.createElement("thead");u.appendChild(p);var q=document.createElement("tr");p.appendChild(q);var k=document.createElement("th");q.appendChild(k);r.push(k);o(k,"name");t.forEach(function(w){k=document.createElement("th");q.appendChild(k);r.push(k);$(k).addClass(w);o(k,w)});var m=document.createElement("tbody");u.appendChild(m);this.m_model=n;this.m_log_view=s;this.m_table=u;this.m_thead=r;this.m_tbody=m;this.m_sort={attr:"name",reverse:false};this.m_current_path=null;this.m_selected_path=null;this.updateSortingHint()};c.prototype={update:function(){var l=this.m_model.path();if(this.current_path!=l){this.current_path=l;this.m_selected_path=null}this.updateSortingHint();while(this.m_tbody.firstChild){this.m_tbody.removeChild(this.m_tbody.firstChild)}var k=this.m_model.resource(l);if(!k){$(this.m_table).removeClass(c.CLASS_LOADING);return}if(k.isLoading()){this.createLoadingTable()}else{if(k.isLoaded()){this.createLoadedTable(k)}}},createLoadingTable:function(){var k=c.ROW_ATTRS;$(this.m_table).addClass(c.CLASS_LOADING);var m=document.createElement("tr");this.m_tbody.appendChild(m);var n=document.createElement("td");m.appendChild(n);n.setAttribute("colspan",k.length+1);var l=document.createElement("span");n.appendChild(l);l.appendChild(document.createTextNode(c.i18n("loading")))},createLoadedTable:function(n){$(this.m_table).removeClass(c.CLASS_LOADING);var p=null;switch(this.m_sort.attr){case"author":case"revision":case"size":var l=this.m_sort.attr;p=function(s){return s.info(l)||""};break;case"date":p=function(s){return s.info("date").getTime()};break;case"name":default:p=function(s){return s.name(true)};break}var q=function(s){return function(t,u){var v=s(t);var w=s(u);if(v<w){return -1}else{if(v==w){return 0}else{return 1}}}};var k=function(s){return function(t,u){return -s(t,u)}};var m=q(p);if(this.m_sort.reverse){m=k(m)}var o=q(function(s){return s.name(true)});var r=function(s,u){var t=m(s,u);if(t!=0){return t}return o(s,u)};n.childDirs().sort(r).forEach(function(s){this.createRow(s)},this);n.childFiles().sort(r).forEach(function(s){this.createRow(s)},this)},createRow:function(n,s){var t=this;var v=n.path();var o=document.createElement("tr");this.m_tbody.appendChild(o);$(o).addClass("ui-state-default");$(o).hover(function(){$(this).removeClass("ui-state-default").addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover").addClass("ui-state-default")});$(o).click(function(){if(t.m_log_view){t.m_log_view.change(t.m_model.repositoryInfo().root_url+v,t.m_model.pegRevision())}t.m_selected_path=v;t.update()});if(this.m_selected_path==v){$(o).addClass("ui-state-highlight")}var l=document.createElement("td");o.appendChild(l);$(l).addClass("name");var q=document.createElement("span");l.appendChild(q);var m="ui-icon ui-icon-inline-block";if(n.isDirectory()){m+=" ui-icon-folder-collapsed"}else{if(n.isFile()){m+=" ui-icon-document"}else{m+=" ui-icon-help"}}$(q).addClass(m);var p=document.createElement("a");l.appendChild(p);$(p).addClass(c.CLASS_DIR_LINK);p.appendChild(document.createTextNode(s||n.name(true)));if(n.isDirectory()){$(p).click(function(){if(n.isLoaded()){t.m_model.changePath(v)}else{t.m_model.changePath(v);t.m_model.reloadPath(v)}})}else{if(n.isFile()){$(p).attr("href",n.contentUrl());$(p).attr("target","_blank")}}l=document.createElement("td");o.appendChild(l);$(l).addClass("author");l.appendChild(document.createTextNode(n.info("author")||""));l=document.createElement("td");o.appendChild(l);$(l).addClass("revision");l.appendChild(document.createTextNode(n.info("revision")));l=document.createElement("td");o.appendChild(l);$(l).addClass("date");var k=document.createElement("time");l.appendChild(k);k.appendChild(document.createTextNode(j.date(n.info("date"))));k.setAttribute("datetime",n.info("date").toLocaleString());l=document.createElement("td");o.appendChild(l);$(l).addClass("size");if(n.isFile()){var u=n.info("size");var r="";if(u<1000){r=u+" B"}else{if(u<1000*1000){r=(Math.round(u/100)/10)+" KB"}else{r=(Math.round(u/(1000*100))/10)+" MB"}}l.appendChild(document.createTextNode(r));l.setAttribute("title",u+" Byte")}else{l.appendChild(document.createTextNode(" - "))}},updateSortingHint:function(){$(this.m_thead[0]).find("span").removeClass(c.CLASS_ASCENDANT+" "+c.CLASS_DESCENDANT);c.ROW_ATTRS.forEach(function(m,n){$(this.m_thead[n+1]).find("span").removeClass(c.CLASS_ASCENDANT+" "+c.CLASS_DESCENDANT)},this);var l=this.m_sort.reverse?c.CLASS_DESCENDANT:c.CLASS_ASCENDANT;if(this.m_sort.attr=="name"){$(this.m_thead[0]).find("span").addClass(l)}else{var k=c.ROW_ATTRS.indexOf(this.m_sort.attr);if(k>=0){$(this.m_thead[k+1]).find("span").addClass(l)}}}};c.i18n=j.translator({en:{name:"Name",author:"Author",revision:"Revision",date:"Date",size:"Size",loading:"Loading..."},ja:{name:"ファイル名",author:"作者",revision:"リビジョン",date:"日付",size:"サイズ",loading:"読み込み中…"}});c.ROW_ATTRS=["author","revision","date","size"];c.CLASS_ROOT_TABLE="file_list_view";c.CLASS_LOADING="loading";c.CLASS_DIR_LINK="dir_link";c.CLASS_ASCENDANT="ascendant";c.CLASS_DESCENDANT="descendant";var d=function(m,l,k){this.m_view_elem=m;this.m_log_model=new DavSvnLogModel(l,k);this.m_url=l;this.m_revision=k;this.initializeLogModel()};d.prototype={initializeLogModel:function(){if(this.m_log_model){this.m_log_model.removeListener(this)}this.m_log_model=new DavSvnLogModel(this.m_url,this.m_revision);this.m_log_model.addListener(this);this.m_log_model.loadInitialLogs(d.LOG_COUNT_STEP)},update:function(){this.updateLog()},change:function(l,k){if(this.m_url!=l||this.m_revision!=k){this.m_url=l;this.m_revision=k;this.initializeLogModel()}},changeRevision:function(k){if(this.m_revision!=k){this.m_revision=k;this.initializeLogModel()}},updateLog:function(){if(this.m_log_model.isLoading()){$(this.m_view_elem).addClass(d.CLASS_LOADING)}else{$(this.m_view_elem).removeClass(d.CLASS_LOADING)}var o=document.createElement("dl");this.m_view_elem.appendChild(o);$(o).addClass(d.CLASS_LOG_VIEW);var r=document.createElement("dt");o.appendChild(r);r.appendChild(document.createTextNode(this.m_log_model.url()));var k=document.createElement("dd");o.appendChild(k);var q=document.createElement("dl");k.appendChild(q);this.m_log_model.eachLog(function(s){this.createLog(q,s)},this);var n=null;if(this.m_log_model.hasMoreLogs()){n=document.createElement("div");this.m_view_elem.appendChild(n);if(this.m_log_model.isLoading()){n.appendChild(document.createTextNode(d.i18n("loading")))}else{var m=document.createElement("input");n.appendChild(m);m.setAttribute("type","button");$(m).button({label:d.i18n("show_older_logs")});var l=this;$(m).click(function(){l.m_log_model.loadMoreLogs(d.LOG_COUNT_STEP)})}}var p=Array.prototype.filter.call(this.m_view_elem.childNodes,function(s){return s!=o&&s!=n});p.forEach(function(s){this.m_view_elem.removeChild(s)},this)},createLog:function(q,o){var l=document.createElement("dt");q.appendChild(l);var p=document.createElement("span");l.appendChild(p);$(p).addClass("ui-icon ui-icon-triangle-1-e ui-icon-inline-block");$(l).addClass(d.CLASS_COLLAPSED);$(p).click(function(){if($(l).hasClass(d.CLASS_COLLAPSED)){$(l).removeClass(d.CLASS_COLLAPSED);$(this).removeClass("ui-icon-triangle-1-e");$(this).addClass("ui-icon-triangle-1-se");$(l).next().children().show("blind")}else{$(l).addClass(d.CLASS_COLLAPSED);$(this).removeClass("ui-icon-triangle-1-se");$(this).addClass("ui-icon-triangle-1-e");$(l).next().children().hide("blind")}});var n=document.createElement("span");l.appendChild(n);$(n).addClass(d.CLASS_REVISION);n.appendChild(document.createTextNode(o.revision));n=document.createElement("time");l.appendChild(n);$(n).addClass(d.CLASS_DATE);n.appendChild(document.createTextNode(j.date(o.date)));n.setAttribute("datetime",o.date.toLocaleString());n=document.createElement("span");l.appendChild(n);$(n).addClass(d.CLASS_AUTHOR);n.appendChild(document.createTextNode(o.author||""));n=document.createElement("span");l.appendChild(n);$(n).addClass(d.CLASS_COMMENT);var r=(o.comment||"");var m=r.indexOf("\n");if(m<0||m>d.COMMENT_LENGTH){m=d.COMMENT_LENGTH}var v=r.substr(0,m);if(v.length<r.length){v+="..."}n.appendChild(document.createTextNode(v));var u=document.createElement("dd");q.appendChild(u);var k=document.createElement("div");u.appendChild(k);k.appendChild(document.createTextNode(r));$(k).hide();var t=o.paths;if(t.length>0){var s=document.createElement("ul");u.appendChild(s);$(s).addClass(d.CLASS_PATH_LIST);t.forEach(function(y){var w=document.createElement("li");s.appendChild(w);var x=document.createElement("span");w.appendChild(x);x.appendChild(document.createTextNode(y.type));$(x).addClass(d.CLASS_PATH_TYPE+" "+y.type);var x=document.createElement("span");w.appendChild(x);var z=y.path;if(y.copyfrom_path&&y.copyfrom_rev){z+=" ("+y.copyfrom_path+"@"+y.copyfrom_rev+")"}x.appendChild(document.createTextNode(z));$(x).addClass(d.CLASS_PATH_NAME)});$(s).hide()}}};d.i18n=j.translator({en:{show_older_logs:"Show older logs.",loading:"Loading..."},ja:{show_older_logs:"古いログを表示",loading:"読み込み中…"}});d.CLASS_LOG_VIEW="log_view";d.CLASS_REVISION="revision";d.CLASS_AUTHOR="author";d.CLASS_DATE="date";d.CLASS_COMMENT="comment";d.CLASS_PATH_LIST="path_list";d.CLASS_PATH_TYPE="path_type";d.CLASS_PATH_NAME="path_name";d.CLASS_COLLAPSED="collapsed";d.CLASS_LOADING="loading";d.COMMENT_LENGTH=40;d.LOG_COUNT_STEP=20;var i=function(m,k,l){this.m_elem=m;this.m_model=k;this.m_log_view=l;this.m_revision=null;this.setClickHandler()};i.prototype={update:function(){var k=this.m_model.pegRevision();if(k!=this.m_revision){while(this.m_elem.firstChild){this.m_elem.removeChild(this.m_elem.firstChild)}this.m_elem.appendChild(document.createTextNode(k));this.m_revision=k}},setClickHandler:function(){var k=this;var l={autoOpen:false,title:i.i18n("set_revision"),modal:true,buttons:{}};l.buttons[i.i18n("ok")]=function(){var m=$(this).find("input").attr("value");if(!String(m).match(i.REVISION_PATTERN)){k.m_revision_dialog.find(".error_message").show();return false}if(k.m_log_view){k.m_log_view.changeRevision(m)}k.m_model.setRevision((m=="HEAD"?m:parseInt(m)));$(this).dialog("close")};this.m_revision_dialog=$("<div></div>").html("<p class='error_message ui-state-error' style='display: none;'><span class='ui-icon ui-icon-alert ui-icon-inline-block'></span>"+i.i18n("error_message")+"</p><p><label>"+i.i18n("revision")+" <input type='text' value='' /></label></p>").dialog(l);$(this.m_elem).click(function(){k.m_revision_dialog.dialog("open")})}};i.i18n=j.translator({en:{set_revision:"Set revision.",revision:"Revision",ok:"Ok",error_message:"Revision must be number or 'HEAD'."},ja:{set_revision:"リビジョン指定",revision:"リビジョン",ok:"OK",error_message:"リビジョンは数値か 'HEAD' にしてください。"}});i.REVISION_PATTERN=/^(HEAD|[0-9]+)$/;var f=function(o,m){$("#content_frame").splitter({splitVertical:true,sizeLeft:true});$(window).resize(function(s){if(s.target==window){$("#content_frame").trigger("resize")}});var n=new DavSvnModel(o,m,true);var q=new d(document.getElementById("log_view"),o,n.pegRevision());var r=new c(document.getElementById("file_list"),n,q);n.addListener(r);var l=new i(document.getElementById("revision_setting"),n,q);n.addListener(l);var k=new h(document.getElementById("path_view"),n,q);n.addListener(k);var p=new e(document.getElementById("dir_tree"),n,q);n.addListener(p);$("#content_widget").resizable({handles:"s",helper:"ui-resize-helper",stop:function(t,u){var s=$("#content_widget").innerHeight()-$("#content_header").outerHeight();if(s<0){s=10}$("#dir_tree").css("height",s+"px");$("#file_list").css("height",s+"px");$("#content_frame").css("height",s+"px").trigger("resize")}})};var a=function(o,l,k){var n="";var p="";if(o){n=l;if(k!="HEAD"){n+="?p="+k}p="Normal View"}else{n=l+"?ajaxview";if(k!="HEAD"){n+="&p="+k}p="Ajax View"}var m=document.createElement("a");m.setAttribute("href",n);var q=document.getElementById("toggle_ajaxview");q.appendChild(m);$(q).show();m.appendChild(document.createTextNode(p))};var b=function(){if(!$.browser.webkit&&!$.browser.mozilla){return false}if(typeof(window.history.pushState)!="function"){return false}return true};var g=function(){if(!b()){return}var m=DavSvnPjaxState.parseUrl(location.href);var l=m.url;var k="HEAD";if(m.params.p&&m.params.p!="HEAD"){k=parseInt(m.params.p)}a(m.params.ajaxview,l,k);if(!m.params.ajaxview){return}$("#main").show();$(".svn").hide();f(l,k)};g()});